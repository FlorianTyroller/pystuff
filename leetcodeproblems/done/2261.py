class Solution:
    def countDistinct(self, nums: list[int], k: int, p: int) -> int:
        arrs = set()
        for i,_ in enumerate(nums):
            for j in range(i+1,len(nums)+1):
                sub_nums = nums[i:j]
                c = 0
                for sn in sub_nums:
                    if sn % p == 0:
                        c+=1
                    if c > k:
                        break
                if c > k:
                    break
                arrs.add(tuple(sub_nums))
        return len(arrs)

    


if __name__ == "__main__":
    s = Solution()
    print(s.countDistinct([2,3,3,2,2], 2, 2))
    print(s.countDistinct([1,2,3,4], 1, 4))
    l = [129,118,170,76,193,187,140,78,39,28,42,160,56,198,10,50,193,5,15,78,118,81,74,8,23,138,65,135,30,142,200,194,181,31,83,116,41,104,84,115,181,147,140,21,116,96,48,28,34,134,56,22,58,158,124,96,37,90,99,154,78,6,72,53,95,148,4,119,116,179,78,86,59,36,159,194,119,150,140,146,110,136,14,119,20,20,18,51,40,143,135,142,176,170,162,45,112,175,117,50,148,72,62,191,81,171,199,80,105,87,4,69,52,188,190,110,51,62,74,116,147,198,132,41,16,128,123,29,163,189,3,64,152,128,78,107,164,108,90,61,189,162,45,140,76,65,118,60,153,74,170,135,123,200,7,126,51,134,154,5,128,78,117,44,65,158,11,161,179,180,157,106,103,124,35,173,26,53,167,192,199,72,17,181,48]
    k = 180
    p = 4
    print(s.countDistinct(l,k,p))
